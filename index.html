<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Titanic EDA - GitHub Pages</title>
  <link rel="stylesheet" href="assets/style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="container">
    <h1>Titanic EDA & Most Important Factor of Death (Survival)</h1>
    <p id="top-feature"></p>

    <div class="grid">
      <div class="card"><canvas id="sexChart"></canvas></div>
      <div class="card"><canvas id="pclassChart"></canvas></div>
      <div class="card"><canvas id="ageChart"></canvas></div>
      <div class="card"><canvas id="embarkedChart"></canvas></div>
      <div class="card full"><canvas id="featImpChart"></canvas></div>
    </div>

    <h2>Notes</h2>
    <p>This page was generated from the Titanic training sample.  
    The "most important factor" below is determined by a RandomForest classifier's feature importance (trained with simple preprocessing).  
    Use this as exploratory analysis, not causal proof.</p>

    <footer>Generated by an automated EDA pipeline.</footer>
  </div>

  <script src="assets/main.js"></script>
  <script>
    /* Inline data (replace with your own JSON if needed) */
    const chartsData = {
      "top_feature_text": "Most important factor for survival: Sex",
      "by_sex": {"Sex": ["male","female"], "survival_rate": [19,74]},
      "by_pclass": {"Pclass": ["1","2","3"], "survival_rate": [63,47,24]},
      "by_agegrp": {"Age_group":["Child","Teen","Adult","Senior"], "survival_rate":[59,47,38,22]},
      "by_embarked": {"Embarked":["C","Q","S"], "survival_rate":[55,39,34]},
      "feature_importances": {
        "feature": ["Sex","Pclass","Age","Fare","Embarked"],
        "importance": [0.45,0.25,0.15,0.1,0.05]
      }
    };

    document.getElementById('top-feature').innerText = chartsData.top_feature_text;

    function makeBar(ctx, labels, values, title){
      return new Chart(ctx,{
        type:'bar',
        data:{labels:labels, datasets:[{label:'Survival %', data:values}]},
        options:{plugins:{title:{display:true,text:title}}, scales:{y:{beginAtZero:true}}}
      });
    }

    makeBar(document.getElementById('sexChart').getContext('2d'),
            chartsData.by_sex.Sex, chartsData.by_sex.survival_rate, 'Survival % by Sex');

    makeBar(document.getElementById('pclassChart').getContext('2d'),
            chartsData.by_pclass.Pclass, chartsData.by_pclass.survival_rate, 'Survival % by Pclass');

    makeBar(document.getElementById('ageChart').getContext('2d'),
            chartsData.by_agegrp.Age_group, chartsData.by_agegrp.survival_rate, 'Survival % by Age group');

    makeBar(document.getElementById('embarkedChart').getContext('2d'),
            chartsData.by_embarked.Embarked, chartsData.by_embarked.survival_rate, 'Survival % by Embarked');

    new Chart(document.getElementById('featImpChart').getContext('2d'), {
      type:'bar',
      data:{labels:chartsData.feature_importances.feature,
            datasets:[{label:'Importance', data:chartsData.feature_importances.importance}]},
      options:{indexAxis:'y',
               plugins:{title:{display:true,text:'Feature importances (RandomForest)'}}}
    });
  </script>
</body>
</html>
